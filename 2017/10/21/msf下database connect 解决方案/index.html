<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	 <link rel="shortcut icon" href="/img/logo_miccall.png">
	
			
    <title>
    Pegases
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    
    	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>

			    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
</head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_solarized.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">PEGASES</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        <a class="category-link" href="/categories/取证/">取证</a></li><li><a class="category-link" href="/categories/技巧/">技巧</a></li><li><a class="category-link" href="/categories/渗透/">渗透</a></li><li><a class="category-link" href="/categories/生活/">生活</a></li><li><a class="category-link" href="/categories/社工/">社工</a>
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/About/index.html" title="简介">
		                简介
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/index.html" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/About/index.html" title="About">
		                About
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
		            
		                <li><a href="https://github.com/majunnn" class="icon fa-github"><span class="label">GitHub</span></a></li>
		            
		            
		                <li><a href="null" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
		            
		            
		                <li><a href="null" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
		            
		            
		                <li><a href="null#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
		            
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(http://otiye40z7.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720171021092750.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >msf 下 database not connect解决方法</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h1 id="msf-下-database-not-connect解决方法"><a href="#msf-下-database-not-connect解决方法" class="headerlink" title="msf 下 database not connect解决方法"></a>msf 下 database not connect解决方法</h1><hr>
<p>This is a short post explaining how to deal with metasploit instance not connected to its database (I’m using the new Kali Linux but it is the same for Backtrack 5). The issue usually surfaces when you try to search auxiliary or exploit.<br>Assuming that you use msfconsole you get something like this:</p>
<p><strong><em><code>msf &gt; search oracle
[!] Database not connected or cache not built, using slow search</code></em></strong></p>
<p>The error says that there are 2 probable causes of the problem</p>
<ul>
<li>either your metasploit framework is not connected to its database (postgresql instance called msf3 by default)</li>
<li>or the metasploit cache was not built.<br>To check if the database is connected you can use db_status command. If your database is connected you will get:</li>
</ul>
<p><strong><em>` msf &gt; db_status[</em>] postgresql connected to msf3 `*</strong></p>
<p>If the database is connected you can skip the next step and go directly to “Step 2: Build the cache”.</p>
<h2 id="Stpe-1-Start-up-PostgreSQL-and-Metasploit-services"><a href="#Stpe-1-Start-up-PostgreSQL-and-Metasploit-services" class="headerlink" title="Stpe 1: Start up PostgreSQL and Metasploit services"></a>Stpe 1: Start up PostgreSQL and Metasploit services</h2><p>If the database is not connected exit your metasploit console and start both postgresql and metasploit services using the following commands:</p>
<p><strong><em><code>#service postgresql start</code></em></strong></p>
<p>Note: if you are using user different then root make sure that he has the privilege level to start those services</p>
<p><img src="http://otiye40z7.bkt.clouddn.com/StartMetasploit-PostgreSQLServices-300x132.png" alt=""></p>
<p>After you’ve dealt with both services start the msfconsole again and check if the database is connected usingdb_status again.</p>
<p>Note: If you want to start the postgresql and metasploit services on each reboot you need to use update-rc.d</p>
<p><strong><em><code>#update-rc.d postgresql enable</code></em></strong></p>
<p><strong><em><code>#update-rc.d metasploit enable</code></em></strong></p>
<p>##Stpe 2: Build the cache<br>To build/rebuild metasploit cache use db_rebuild_cache command:</p>
<p><strong><em><code>msf &gt; db_rebuild_cache</code></em></strong></p>
<p>It takes some time for the cache to be rebuild so be patient.</p>
<p>If all went OK you can now enjoy fast auxiliary/exploit search</p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://pegase.top/2017/10/21/msf下database connect 解决方案/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://pegase.top/2017/10/21/msf下database connect 解决方案/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
            	<span id="busuanzi_container_site_pv">2018总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
